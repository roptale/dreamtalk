
<div class="view-user-page">
  <div class="view-user-header">
    <div class="avatar">
      <% if @user.profile_picture %>
        <%= image_tag @user.profile_picture, alt: "Profile Picture" %>
      <% end %>
    </div>
    <h1 class="m-0"><%= @user.first_name %></h1>
  </div>

  <div class="container">
    <p class="card-text"><strong>Age:</strong> <%= @user.age %></p>
    <p class="card-text"><strong>City:</strong> <%= @user.city %></p>
    <p class="card-text">
    <% if @user.description.nil? || @user.description.empty? %>
      No description yet
    <% else %>
      <%= @user.description %>
    <% end %>
    </p>

    <h2>Spoken Languages</h2>
    <ul>
      <% @user.user_languages.select { |ul| ul.spoken }.each do |ul| %>
        <li><%= ul.language.name %></li>
      <% end %>
    </ul>

    <h2>Wanted Languages</h2>
    <ul>
      <% @user.user_languages.select { |ul| ul.wanted }.each do |ul| %>
        <li><%= ul.language.name %></li>
      <% end %>
    </ul>

    <% if @user == current_user %>
      <%= link_to "Edit Profile", profile_path, class: "btn btn-primary" %>
    <% end %>

    <% if @user != current_user %>
      <%= button_to "Chat with #{ @user.first_name }", find_or_create_chatroom_user_path(@user), method: :post, class: "btn btn-secondary" %>
    <% end %>

  </div>
</div>

<style>
.view-user-page {
  h2 {
    margin-top: 32px;
    font-size: 18px;
  }

  .view-user-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 32px 16px;

    .avatar {
      width: 192px;
      height: 192px;
      border-radius: 50%;
      background-color: #AAA;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
      }
    }
  }
}

</style>
